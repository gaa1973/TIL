Express は一致するルートがない場合、自動で 404 レスポンスを返します。
カスタム 404 ハンドラーを追加可能（例: app.use((req, res) => res.status(404).send('Not Found'))）。

10/30

# 認証機能の実装

## HTTP

### GET メソッドの特徴

① リクエストの内容（パラメータ）は URL に含まれる
GET メソッドでは、サーバーに送りたいデータ（検索ワードなど）を URL の末尾に付けて送信します。

例
https://example.com/search?keyword=php

?以降の「keyword=php」がパラメータです。
このパラメータは「キー = 値」の形式で記述され、クエリパラメータと呼ばれます。
パラメータが複数ある場合は&で区切られます。
なお、URL にデータを含める際には、特殊文字やスペースなどを URL エンコードする必要があります。

② ブラウザのアドレスバーにパラメータが見える
URL にパラメータがつくことによって、
・アドレスバーに表示される
・ブックマークできる
・リンクを共有できる
などのメリットもありますが、同時にデータが丸見えになるリスクもあります。
パスワードやクレジットカード番号を GET で送るのは絶対にダメである理由はここにあります。

③ キャッシュされやすい
GET リクエストは「ただデータを取りに行く」ので、ブラウザやプロキシサーバーにキャッシュされやすいです。
つまり、同じリクエストならわざわざサーバーに再リクエストせず、手元に保存してあるデータをすぐ表示してくれることもあります。
これがページ表示の高速化にもつながります。

④ データ量に制限がある
GET は URL に情報を詰め込むため、長すぎる URL だとエラーになります。
これは URL に含めることができる情報量に上限（一般的には 2,000 文字程度）があるためです。
実際の制限値はブラウザやサーバーによって異なりますが、一般的に数 KB〜数十 KB 程度とされています。
つまり、大量のデータ（ファイル、長文など）を送るのには不向きです。

⑤ 安全性が低い（パラメータが丸見えなのでパスワード送信には不向き）
② と関連しており、データが丸見えになるため、パスワードやクレジットカード番号のような重要情報を含めることは絶対に避ける必要があります。

#### GET リクエストの基本的な流れ

① 【リクエスト】ブラウザがサーバーに URL 付きリクエストを送る
② 【データ取得】サーバーは URL からパラメータを読み取る
③ 【レスポンス】要求されたデータを返す（ページ、JSON データなど）

#### 主な使いどころ

・検索フォーム（検索ワードを送る）
・ニュースサイトのページ遷移
・商品一覧の絞り込み条件送信 など

#### GET でやってはいけないこと

・個人情報やパスワードを送ること
・データベース更新（登録・削除・変更）をすること
・大量データを URL に載せること

GET はあくまで取得専用であり、サーバーの状態を変える操作には絶対使わないのがルールです。
これを守らないと、CSRF 攻撃や情報漏洩リスクが高まってしまいます。

### POST リクエストの特徴

POST リクエストの特徴は、そのデータが HTTP リクエストの本文（ボディ）に含まれる点です。これにより、大量のデータや、ファイル、JSON 形式のデータなど、さまざまな種類の情報を安全に送信することが可能になります。

#### GET リクエストとの違い

GET リクエストは、主にサーバーからデータを取得するために使用され、クエリパラメータとして URL にデータが含まれます。一方、POST リクエストはデータをサーバーに送信するために使用され、データはリクエストのボディに格納されます。これにより、GET リクエストに比べて POST リクエストは次のような利点があります：

データ量の制限が少ない：URL にデータを含める必要がないため、送信するデータのサイズに制限が少なく、大量の情報を送信するのに適しています。
セキュリティ面での利点：データが URL に含まれないため、クエリパラメータを使う GET リクエストよりもデータが外部に漏れるリスクが低く、セキュリティが向上します。

#### POST リクエストの基本的な流れ

① 【リクエスト】ブラウザがサーバーにデータ（ボディ）付きリクエストを送る
② 【データ送信】サーバーはボディからデータを取り出す
③ 【データ処理】データベースに登録したり、処理を行ったりする
④ 【レスポンス】レスポンスを返す（成功メッセージ、リダイレクトなど）

#### 主な使いどころ

・ログインフォーム（ID・パスワードを送信）
・会員登録フォーム
・問い合わせフォーム など

#### POST で気をつけるべきこと

・通信は HTTPS で行ない、ボディも暗号化すること
・サーバー側で適切なバリデーションを行ない、不正なデータを防止すること
・同じリクエストが何回も送られると困る場合は、二重送信防止が必要であること

# 実装

##　 package.json に記述
"proxy": "http://localhost:8000"

## フロント側フォルダ構成

my-login-app/
├── public/ # 静的ファイル（HTML, favicon など）
│ └── index.html # メイン HTML（自動生成）
├── src/ # React ソースコード
│ ├── App.tsx # メインコンポーネント
│ ├── index.tsx # エントリーポイント
│ └── ... # 他のコンポーネント
├── package.json # 依存関係
└── tsconfig.json # TypeScript 設定

## フロントエンドファイルの配置

コンポーネント: src/ に置く（例: src/Login.tsx でログイン画面）。
静的ファイル: public/ に置く（例: 画像や追加 HTML）。
メイン App: src/App.tsx を編集してログイン画面を実装。
実行方法
React アプリ起動:

my-login-app ディレクトリで npm start。
ブラウザで http://localhost:3000 が開く（自動）。
バックエンド連携:

CORS 設定: auth-api の app.ts に npm install cors → app.use(cors())。
プロキシ設定: package.json に "proxy": "http://localhost:8000" を追加（開発時のみ）。これで fetch('/api/login') がバックエンドに届く。
同時実行:

ターミナル 1: cd auth-api && npm run watch（バックエンド）。
ターミナル 2: cd my-login-app && npm start（フロントエンド）。
これで SPA として動作します。ログイン画面を作成してテストしてください

bcryptjs のインストール方法
npm install bcryptjs jsonwebtoken @types/bcryptjs @types/jsonwebtoken cors

## 学修順序

JavaScript の基礎（1-2 週間）:

なぜ: すべて JavaScript ベース。変数、関数、配列、オブジェクト、async/await などを学ぶ。
リソース:
MDN Web Docs (https://developer.mozilla.org/ja/docs/Web/JavaScript)
freeCodeCamp の JavaScript コース (https://www.freecodecamp.org/learn/javascript-algorithms-and-data-structures/)
目標: 基本構文を理解。
Node.js（1 週間）:

なぜ: サーバー側 JavaScript。Express の前に Node.js のモジュール（fs, http）を知る。
リソース: Node.js 公式チュートリアル (https://nodejs.org/en/docs/guides/)
目標: シンプルなサーバー作成。
Express（1 週間）:

なぜ: Node.js のフレームワーク。API 作成に必要。
リソース: Express 公式ガイド (https://expressjs.com/en/starter/hello-world.html)
目標: ルート作成、ミドルウェア理解。
React（2-3 週間）:

なぜ: フロントエンドライブラリ。コンポーネント、状態管理を学ぶ。
リソース: React 公式チュートリアル (https://ja.reactjs.org/tutorial/tutorial.html)
目標: シンプルなアプリ作成。
追加 Tips
並行学習: JavaScript を学びながら Node.js/React を少しずつ。
プロジェクト: 各段階で小さなプロジェクト（ToDo アプリ）を作る。
ツール: VS Code, Git。
時間: 1 日 1-2 時間で OK。焦らず進めてください。

## Prisma で自動作成されるメソッドの種類

メソッドの種類
Prisma が提供する CRUD メソッドは固定。
findUnique: 主キーやユニークフィールドで 1 件検索。
findMany: 複数件検索（条件指定可能）。
create: 新規作成。
update: 更新。
delete: 削除。
その他: upsert, findFirst など。

### フロント側の環境　開発サーバーが入っている

作成場所
ツール: create-react-app が package.json の scripts に "start": "react-scripts start" を追加。
内部: react-scripts パッケージが webpack-dev-server などのツールを内包。node_modules にインストール済み。
動作
起動: npm start で Node.js プロセスが立ち上がり、ポート 3000 でサーバー起動。
機能:
ファイル監視: コード変更で自動リビルド・リロード。
ホットリロード: ブラウザが自動更新。
プロキシ: package.json の proxy でバックエンドにリクエスト転送。
プロセス: ターミナルで Ctrl+C で停止。バックグラウンドで webpack がバンドル。
自分でサーバーを作成せず、フレームワークが面倒を見てくれます。詳細は React 公式ドキュメント参照。
